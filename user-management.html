<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>账号管理 - PEL联盟生态数据大屏</title>
    
    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        primary: '#165DFF',
                        secondary: '#F53F3F',
                        success: '#00B42A',
                        warning: '#FF7D00',
                        dark: '#1D2129',
                        'dark-light': '#2B2F36',
                        'gray-light': '#C9CDD4',
                        'gray-dark': '#4E5969',
                    }
                }
            }
        }
    </script>
    
    <!-- 外部资源 -->
    <link rel="stylesheet" href="vendor/fontawesome/6.5.2/css/all.min.css">
<link rel="stylesheet" href="vendor/fontawesome/6.5.2/css/v4-shims.min.css">
    
    <!-- 本地样式 -->
    <link rel="stylesheet" href="css/main.css">
</head>
<body>
    <!-- 顶部导航：由 common.js 动态生成 -->
    <header class="top-nav"></header>

    <!-- 侧边栏导航 -->
    <aside class="sidebar">
        <div class="sidebar-content">
            <div class="sidebar-section">
                <div class="sidebar-section-title">数据管理</div>
                <div class="sidebar-menu">
                    <a href="import-log.html" class="sidebar-item" data-page="import-log">
                        <i class="fa fa-upload"></i>
                        <span>导入日志</span>
                    </a>
                    <a href="data-import.html" class="sidebar-item" data-page="data-import">
                        <i class="fa fa-database"></i>
                        <span>数据导入</span>
                    </a>
                </div>
            </div>
            
            <div class="sidebar-section">
                <div class="sidebar-section-title">生态分析</div>
                <div class="sidebar-menu">
                    <a href="alliance-overview.html" class="sidebar-item" data-page="alliance-overview">
                        <i class="fa fa-dashboard"></i>
                        <span>联盟生态</span>
                    </a>
                    <a href="club-analysis.html" class="sidebar-item" data-page="club-analysis">
                        <i class="fa fa-users"></i>
                        <span>俱乐部生态</span>
                    </a>
                    <a href="club-detail.html" class="sidebar-item" data-page="club-detail">
                        <i class="fa fa-building"></i>
                        <span>俱乐部个体评估</span>
                    </a>
                    <a href="player-management.html" class="sidebar-item" data-page="player-management">
                        <i class="fa fa-user-circle-o"></i>
                        <span>选手管理</span>
                    </a>
                </div>
            </div>
            
            <div class="sidebar-section">
                <div class="sidebar-section-title">业务分析</div>
                <div class="sidebar-menu">
                    <a href="match-analysis.html" class="sidebar-item" data-page="match-analysis">
                        <i class="fa fa-trophy"></i>
                        <span>赛事分析</span>
                    </a>
                    <a href="financial-report.html" class="sidebar-item" data-page="financial-report">
                        <i class="fa fa-line-chart"></i>
                        <span>财务报告</span>
                    </a>
                    <a href="brand-value.html" class="sidebar-item" data-page="brand-value">
                        <i class="fa fa-crown"></i>
                        <span>品牌价值</span>
                    </a>
                    <a href="market-analysis.html" class="sidebar-item" data-page="market-analysis">
                        <i class="fa fa-bar-chart"></i>
                        <span>市场分析</span>
                    </a>
                </div>
            </div>
            
            <div class="sidebar-section">
                <div class="sidebar-section-title">系统设置</div>
                <div class="sidebar-menu">
                    <a href="system-config.html" class="sidebar-item" data-page="system-config">
                        <i class="fa fa-cog"></i>
                        <span>系统配置</span>
                    </a>
                    <a href="user-management.html" class="sidebar-item active" data-page="user-management">
                        <i class="fa fa-users"></i>
                        <span>账号管理</span>
                    </a>
                </div>
            </div>
        </div>
    </aside>

    <!-- 主内容区域 -->
    <main class="main-content">
        <!-- 页面标题 -->
        <div class="page-header">
            <h2 class="page-title">账号管理</h2>
        </div>

        <!-- 统计概览 -->
        <div class="stats-overview">
            <div class="stat-card">
                <div class="stat-icon">
                    <i class="fa fa-shield"></i>
                </div>
                <div class="stat-content">
                    <div class="stat-value">1</div>
                    <div class="stat-label">超级管理员</div>
                </div>
                <div class="stat-trend neutral">
                    <i class="fa fa-circle"></i>
                </div>
            </div>
            <div class="stat-card">
                <div class="stat-icon">
                    <i class="fa fa-cogs"></i>
                </div>
                <div class="stat-content">
                    <div class="stat-value">2</div>
                    <div class="stat-label">生态运营管理员</div>
                </div>
                <div class="stat-trend neutral">
                    <i class="fa fa-circle"></i>
                </div>
            </div>
            <div class="stat-card">
                <div class="stat-icon">
                    <i class="fa fa-users"></i>
                </div>
                <div class="stat-content">
                    <div class="stat-value">19</div>
                    <div class="stat-label">俱乐部账号</div>
                </div>
                <div class="stat-trend neutral">
                    <i class="fa fa-circle"></i>
                </div>
            </div>
        </div>

        <!-- 工具栏 -->
        <div class="toolbar">
            <div class="toolbar-left">
                <div class="search-box">
                    <i class="fa fa-search"></i>
                    <input type="text" placeholder="搜索账号..." id="userSearch">
                </div>
            </div>
            <div class="toolbar-right">
                <button class="btn btn-primary" onclick="showAddUserModal()">
                    <i class="fa fa-plus"></i>
                    新增账号
                </button>
            </div>
        </div>

        <!-- 用户列表 -->
        <div class="user-list-container">
            <div class="table-container">
                <table class="data-table" id="userTable">
                    <thead>
                        <tr>
                            <th>账号ID</th>
                            <th>账号名称</th>
                            <th>账号类型</th>
                            <th>所属俱乐部</th>
                            <th>创建时间</th>
                            <th>状态</th>
                            <th>操作</th>
                        </tr>
                    </thead>
                    <tbody id="userTableBody">
                        <!-- 用户数据将通过JavaScript动态生成 -->
                    </tbody>
                </table>
            </div>
            
            <!-- 分页 -->
            <div class="pagination">
                <div class="pagination-info">
                    显示 <span id="pageInfo">1-5</span> 条，共 <span id="totalCount">22</span> 条
                </div>
                <div class="pagination-controls">
                    <button class="pagination-btn" onclick="changePage(-1)">
                        <i class="fa fa-chevron-left"></i>
                    </button>
                    <span class="pagination-pages">
                        <button class="pagination-page active">1</button>
                        <button class="pagination-page">2</button>
                        <button class="pagination-page">3</button>
                        <button class="pagination-page">4</button>
                        <button class="pagination-page">5</button>
                    </span>
                    <button class="pagination-btn" onclick="changePage(1)">
                        <i class="fa fa-chevron-right"></i>
                    </button>
                </div>
            </div>
        </div>

        <!-- 权限设置 -->
        <div class="permission-section">
            <div class="section-header">
                <h3 class="section-title">
                    <i class="fa fa-lock"></i>
                    权限设置
                </h3>
                <div class="permission-type">
                    <label class="form-label">选择账号类型：</label>
                    <select class="filter-select" id="permissionTypeSelect">
                        <option value="admin">admin</option>
                        <option value="eco_admin">eco_admin</option>
                        <option value="club_account">club_account</option>
                    </select>
                </div>
            </div>
            <div class="permissions-list">
                <div class="permission-item">
                    <span>超级管理员总权限</span>
                    <label class="switch">
                        <input type="checkbox" checked>
                        <span class="slider"></span>
                    </label>
                </div>
                <div class="permission-item">
                    <span>账号管理权限</span>
                    <label class="switch">
                        <input type="checkbox" checked>
                        <span class="slider"></span>
                    </label>
                </div>
                <div class="permission-item">
                    <span>账号导出权限</span>
                    <label class="switch">
                        <input type="checkbox">
                        <span class="slider"></span>
                    </label>
                </div>
                <div class="permission-item">
                    <span>全局数据读取权限</span>
                    <label class="switch">
                        <input type="checkbox" checked>
                        <span class="slider"></span>
                    </label>
                </div>
                <div class="permission-item">
                    <span>数据导出权限</span>
                    <label class="switch">
                        <input type="checkbox">
                        <span class="slider"></span>
                    </label>
                </div>
                <div class="permission-item">
                    <span>俱乐部数据权限</span>
                    <label class="switch">
                        <input type="checkbox" checked>
                        <span class="slider"></span>
                    </label>
                </div>
                <div class="permission-item">
                    <span>上传权限</span>
                    <label class="switch">
                        <input type="checkbox" checked>
                        <span class="slider"></span>
                    </label>
                </div>
                <div class="permission-item">
                    <span>本队数据上传与查看权限</span>
                    <label class="switch">
                        <input type="checkbox" checked>
                        <span class="slider"></span>
                    </label>
                </div>
                <div class="permission-item">
                    <span>联赛数据查看权限</span>
                    <label class="switch">
                        <input type="checkbox" checked>
                        <span class="slider"></span>
                    </label>
                </div>
            </div>
        </div>

        <!-- 操作日志已移除，按原型展示权限设置即可 -->
    </main>

    <!-- 添加用户模态框 -->
    <!-- 新增账号模态框 -->
    <div class="modal" id="addUserModal">
        <div class="modal-content">
            <span class="close" onclick="closeModal('addUserModal')">&times;</span>
            <h3 id="modal-title" class="text-white font-semibold text-xl mb-4">新增账号</h3>
            <form id="account-form" class="space-y-4">
                <div class="space-y-2">
                    <label for="account-name" class="text-gray-light text-sm">账号名称 (邮箱)</label>
                    <input type="email" id="account-name" class="w-full bg-dark border border-gray-dark text-white rounded-lg px-4 py-2 focus:outline-none focus:ring-2 focus:ring-primary focus:border-transparent" placeholder="请输入邮箱地址" required>
                </div>
                <div class="space-y-2">
                    <label for="account-type" class="text-gray-light text-sm">账号类型</label>
                    <select id="account-type" class="w-full bg-dark border border-gray-dark text-white rounded-lg px-4 py-2 focus:outline-none focus:ring-2 focus:ring-primary focus:border-transparent" onchange="toggleClubSelection()">
                        <option value="">请选择账号类型</option>
                        <option value="super-admin">超级管理员</option>
                        <option value="ecology-staff">生态运营人员</option>
                        <option value="club-account">俱乐部账号</option>
                    </select>
                </div>
                <div id="club-selection" class="space-y-2" style="display: none;">
                    <label for="club" class="text-gray-light text-sm">所属俱乐部</label>
                    <select id="club" class="w-full bg-dark border border-gray-dark text-white rounded-lg px-4 py-2 focus:outline-none focus:ring-2 focus:ring-primary focus:border-transparent">
                        <option value="">请选择俱乐部</option>
                        <option value="tt">TT</option>
                        <option value="tianba">Tianba</option>
                        <option value="wbg">WBG</option>
                        <option value="jdg">JDG</option>
                        <option value="tc">TC</option>
                        <option value="ste">STE</option>
                        <option value="lgd">LGD</option>
                        <option value="rw">RW</option>
                        <option value="ag">AG</option>
                        <option value="vs">VS</option>
                        <option value="tjb">TJB</option>
                        <option value="nv">NV</option>
                        <option value="4am">4AM</option>
                        <option value="ksg">KSG</option>
                        <option value="act">ACT</option>
                        <option value="kbg">KBG</option>
                        <option value="rsg">RSG</option>
                        <option value="st">ST</option>
                        <option value="tec">TEC</option>
                        <option value="kone">KONE</option>
                    </select>
                </div>
                <div class="space-y-2">
                    <label for="account-status" class="text-gray-light text-sm">账号状态</label>
                    <select id="account-status" class="w-full bg-dark border border-gray-dark text-white rounded-lg px-4 py-2 focus:outline-none focus:ring-2 focus:ring-primary focus:border-transparent">
                        <option value="active">活跃</option>
                        <option value="disabled">已禁用</option>
                    </select>
                </div>
                <div class="flex justify-end space-x-3 pt-4">
                    <button type="button" id="cancel-modal" class="px-4 py-2 bg-dark border border-gray-dark text-white rounded-lg hover:bg-gray-dark transition-colors duration-200" onclick="closeModal('addUserModal')">取消</button>
                    <button type="submit" class="px-4 py-2 bg-primary text-white rounded-lg hover:bg-primary/90 transition-colors duration-200" onclick="addUser()">保存</button>
                </div>
            </form>
        </div>
    </div>

    <!-- 用户详情模态框 -->
    <div class="modal" id="userDetailModal">
        <div class="modal-content large">
            <div class="modal-header">
                <h3 class="modal-title">用户详情</h3>
                <button class="modal-close" onclick="closeModal('userDetailModal')">
                    <i class="fa fa-times"></i>
                </button>
            </div>
            <div class="modal-body">
                <div class="user-detail-content">
                    <!-- 用户详情内容将通过JavaScript动态生成 -->
                </div>
            </div>
            <div class="modal-footer">
                <button class="btn btn-secondary" onclick="closeModal('userDetailModal')">关闭</button>
                <button class="btn btn-primary" onclick="editUser()">编辑用户</button>
            </div>
        </div>
    </div>

    <!-- JavaScript -->
    <script src="js/common.js"></script>
    <script>
        // 模拟用户数据
        const userData = [
            {
                id: 1,
                username: 'admin',
                name: '系统管理员',
                email: 'admin@pel.com',
                phone: '13800138000',
                role: 'admin',
                roleName: '超级管理员',
                department: 'management',
                departmentName: '管理层',
                status: 'active',
                lastLogin: '2023-06-15 14:30:25',
                createTime: '2023-01-01 09:00:00',
                avatar: null
            },
            {
                id: 2,
                username: 'analyst001',
                name: '张三',
                email: 'zhangsan@pel.com',
                phone: '13800138001',
                role: 'analyst',
                roleName: '数据分析师',
                department: 'analysis',
                departmentName: '分析部',
                status: 'active',
                lastLogin: '2023-06-15 14:25:10',
                createTime: '2023-02-15 10:30:00',
                avatar: null
            },
            {
                id: 3,
                username: 'operator001',
                name: '李四',
                email: 'lisi@pel.com',
                phone: '13800138002',
                role: 'operator',
                roleName: '运营专员',
                department: 'operation',
                departmentName: '运营部',
                status: 'active',
                lastLogin: '2023-06-15 13:45:30',
                createTime: '2023-03-01 14:20:00',
                avatar: null
            },
            {
                id: 4,
                username: 'viewer001',
                name: '王五',
                email: 'wangwu@pel.com',
                phone: '13800138003',
                role: 'viewer',
                roleName: '访客',
                department: 'tech',
                departmentName: '技术部',
                status: 'inactive',
                lastLogin: '2023-06-14 16:20:15',
                createTime: '2023-04-10 11:15:00',
                avatar: null
            },
            {
                id: 5,
                username: 'analyst002',
                name: '赵六',
                email: 'zhaoliu@pel.com',
                phone: '13800138004',
                role: 'analyst',
                roleName: '数据分析师',
                department: 'analysis',
                departmentName: '分析部',
                status: 'locked',
                lastLogin: '2023-06-13 09:30:45',
                createTime: '2023-05-05 15:45:00',
                avatar: null
            }
        ];

        let currentPage = 1;
        let pageSize = 5;
        let filteredData = [...userData];

        document.addEventListener('DOMContentLoaded', function() {
            renderUserTable();
            setupEventListeners();
        });

        function setupEventListeners() {
            // 搜索功能
            const searchInput = document.getElementById('userSearch');
            if (searchInput) {
                searchInput.addEventListener('input', filterUsers);
            }
        }

        function filterUsers() {
            const searchTerm = (document.getElementById('userSearch').value || '').toLowerCase();

            filteredData = userData.filter(user => {
                return !searchTerm ||
                    String(user.id).padStart(3, '0').includes(searchTerm) ||
                    (user.email && user.email.toLowerCase().includes(searchTerm)) ||
                    (user.username && user.username.toLowerCase().includes(searchTerm));
            });

            currentPage = 1;
            renderUserTable();
        }

        function renderUserTable() {
            const tbody = document.getElementById('userTableBody');
            const startIndex = (currentPage - 1) * pageSize;
            const endIndex = startIndex + pageSize;
            const pageData = filteredData.slice(startIndex, endIndex);

            tbody.innerHTML = pageData.map(user => {
                const idText = String(user.id).padStart(3, '0');
                const emailText = user.email || user.username || '';
                const typeLabel = getTypeLabel(user.role);
                const clubText = getClubName(user);
                const createDate = formatDate(user.createTime);
                const statusInfo = getStatusInfo(user.status);

                return `
                <tr>
                    <td>${idText}</td>
                    <td>${emailText}</td>
                    <td><span class="role-badge role-${user.role}">${typeLabel}</span></td>
                    <td>${clubText}</td>
                    <td>${createDate}</td>
                    <td><span class="status-badge status-${statusInfo.class}">${statusInfo.text}</span></td>
                    <td>
                        <div class="action-buttons">
                            <button class="btn btn-sm btn-secondary" onclick="viewUser(${user.id})" title="查看">
                                <i class="fa fa-eye"></i>
                            </button>
                            <button class="btn btn-sm btn-secondary" onclick="editUser(${user.id})" title="编辑">
                                <i class="fa fa-edit"></i>
                            </button>
                            <button class="btn btn-sm btn-secondary" onclick="toggleStatus(${user.id})" title="${user.status==='inactive' ? '启用' : '禁用'}">
                                <i class="fa fa-power-off"></i>
                            </button>
                        </div>
                    </td>
                </tr>
                `;
            }).join('');

            updatePaginationInfo();
        }

        function getStatusInfo(status) {
            const map = {
                active: { text: '启用', class: 'active' },
                inactive: { text: '已禁用', class: 'inactive' },
                locked: { text: '禁用中', class: 'locked' },
                pending: { text: '待激活', class: 'pending' }
            };
            return map[status] || { text: status, class: 'inactive' };
        }

        function getTypeLabel(role) {
            const map = {
                admin: '超级管理员',
                analyst: '生态运营管理员',
                operator: '生态运营管理员',
                viewer: '俱乐部账号'
            };
            return map[role] || role;
        }

        function formatDate(dateStr) {
            return (dateStr || '').split(' ')[0];
        }

        function getClubName(user) {
            if (user.role === 'admin' || user.role === 'analyst' || user.role === 'operator') {
                return '-';
            }
            const idMap = { 3: '4AM战队', 4: 'NV战队', 5: 'AG战队' };
            return idMap[user.id] || user.departmentName || '-';
        }

        function updatePaginationInfo() {
            const totalCountMock = 22; // 与原型一致的总数展示
            const startIndex = (currentPage - 1) * pageSize + 1;
            const endIndex = Math.min(currentPage * pageSize, totalCountMock);
            
            document.getElementById('pageInfo').textContent = `${startIndex}-${endIndex}`;
            document.getElementById('totalCount').textContent = totalCountMock;
        }

        function changePage(direction) {
            const totalPages = Math.ceil(filteredData.length / pageSize);
            const newPage = currentPage + direction;
            
            if (newPage >= 1 && newPage <= totalPages) {
                currentPage = newPage;
                renderUserTable();
            }
        }

        function showAddUserModal() {
            document.getElementById('addUserModal').style.display = 'flex';
        }

        function closeModal(modalId) {
            document.getElementById(modalId).style.display = 'none';
        }

        function addUser() {
            console.log('添加用户');
            // 这里添加用户创建逻辑
            closeModal('addUserModal');
            alert('用户添加成功！');
        }

        function viewUser(userId) {
            const user = userData.find(u => u.id === userId);
            if (user) {
                // 显示用户详情
                console.log('查看用户:', user);
                document.getElementById('userDetailModal').style.display = 'flex';
            }
        }

        function editUser(userId) {
            console.log('编辑用户:', userId);
        }

        function toggleStatus(userId) {
            const user = userData.find(u => u.id === userId);
            if (!user) return;
            user.status = user.status === 'inactive' ? 'active' : 'inactive';
            renderUserTable();
        }

        function resetPassword(userId) {
            if (confirm('确定要重置该用户的密码吗？')) {
                console.log('重置密码:', userId);
                alert('密码重置成功，新密码已发送到用户邮箱！');
            }
        }

        function deleteUser(userId) {
            if (confirm('确定要删除该用户吗？此操作不可恢复！')) {
                console.log('删除用户:', userId);
                alert('用户删除成功！');
            }
        }

        function exportUsers() {
            console.log('导出用户数据');
            alert('用户数据导出成功！');
        }

        function showRoleModal() {
            console.log('显示角色管理模态框');
        }

        function editRole(roleId) {
            console.log('编辑角色:', roleId);
        }

        function viewRoleUsers(roleId) {
            console.log('查看角色用户:', roleId);
        }
    </script>
    
    <style>
        .stats-overview {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 20px;
            margin-bottom: 32px;
        }
        
        .stat-card {
            background: var(--dark-100);
            border-radius: var(--border-radius);
            padding: 24px;
            border: 1px solid var(--dark-200);
            display: flex;
            align-items: center;
            gap: 16px;
        }
        
        .stat-icon {
            width: 48px;
            height: 48px;
            background: var(--primary-color);
            border-radius: 8px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 20px;
            color: white;
        }
        
        .stat-content {
            flex: 1;
        }
        
        .stat-value {
            font-size: 28px;
            font-weight: 700;
            color: white;
            line-height: 1;
            margin-bottom: 4px;
        }
        
        .stat-label {
            color: var(--light-100);
            font-size: 14px;
        }
        
        .stat-trend {
            display: flex;
            align-items: center;
            gap: 4px;
            font-size: 12px;
            font-weight: 600;
        }
        
        .stat-trend.positive {
            color: var(--success-color);
        }
        
        .stat-trend.negative {
            color: var(--danger-color);
        }
        
        .stat-trend.neutral {
            color: var(--light-100);
        }
        
        .toolbar {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 24px;
            gap: 20px;
        }
        
        .toolbar-left {
            display: flex;
            align-items: center;
            gap: 16px;
            flex: 1;
        }
        
        .toolbar-right {
            display: flex;
            gap: 12px;
        }
        
        .search-box {
            position: relative;
            min-width: 300px;
        }
        
        .search-box i {
            position: absolute;
            left: 12px;
            top: 50%;
            transform: translateY(-50%);
            color: var(--light-100);
        }
        
        .search-box input {
            width: 100%;
            padding: 12px 16px 12px 40px;
            background: var(--dark-200);
            border: 1px solid var(--dark-300);
            border-radius: 6px;
            color: white;
            font-size: 14px;
        }
        
        .filter-group {
            display: flex;
            gap: 12px;
        }
        
        .filter-select {
            padding: 12px 16px;
            background: var(--dark-200);
            border: 1px solid var(--dark-300);
            border-radius: 6px;
            color: white;
            font-size: 14px;
            min-width: 120px;
        }
        
        .user-list-container {
            background: var(--dark-100);
            border-radius: var(--border-radius);
            border: 1px solid var(--dark-200);
            overflow: hidden;
        }
        
        .table-container {
            overflow-x: auto;
        }
        
        .data-table {
            width: 100%;
            border-collapse: collapse;
        }
        
        .data-table th,
        .data-table td {
            padding: 16px;
            text-align: left;
            border-bottom: 1px solid var(--dark-200);
        }
        
        .data-table th {
            background: var(--dark-200);
            color: var(--light-100);
            font-weight: 600;
            font-size: 14px;
        }
        
        .data-table td {
            color: white;
            font-size: 14px;
        }
        
        .data-table tr:hover {
            background: var(--dark-200);
        }
        
        .user-info {
            display: flex;
            align-items: center;
            gap: 12px;
        }
        
        .user-avatar {
            width: 40px;
            height: 40px;
            background: var(--primary-color);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-size: 16px;
        }
        
        .user-details {
            flex: 1;
        }
        
        .user-name {
            font-weight: 600;
            margin-bottom: 4px;
        }
        
        .user-meta {
            display: flex;
            gap: 12px;
            font-size: 12px;
            color: var(--light-100);
        }
        
        .role-badge {
            padding: 4px 8px;
            border-radius: 4px;
            font-size: 12px;
            font-weight: 500;
        }
        
        .role-admin {
            background: var(--danger-color);
            color: white;
        }
        
        .role-analyst {
            background: var(--primary-color);
            color: white;
        }
        
        .role-operator {
            background: var(--warning-color);
            color: white;
        }
        
        .role-viewer {
            background: var(--info-color);
            color: white;
        }
        
        .status-badge {
            padding: 4px 8px;
            border-radius: 4px;
            font-size: 12px;
            font-weight: 500;
        }
        
        .status-active {
            background: var(--success-color);
            color: white;
        }
        
        .status-inactive {
            background: var(--light-100);
            color: var(--dark-100);
        }
        
        .status-locked {
            background: var(--danger-color);
            color: white;
        }
        
        .status-pending {
            background: var(--warning-color);
            color: white;
        }
        
        .action-buttons {
            display: flex;
            gap: 4px;
        }
        
        .pagination {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 16px 24px;
            background: var(--dark-200);
            border-top: 1px solid var(--dark-300);
        }
        
        .pagination-info {
            color: var(--light-100);
            font-size: 14px;
        }
        
        .pagination-controls {
            display: flex;
            align-items: center;
            gap: 8px;
        }
        
        .pagination-btn {
            padding: 8px 12px;
            background: var(--dark-300);
            border: none;
            border-radius: 4px;
            color: white;
            cursor: pointer;
            transition: background-color 0.3s ease;
        }
        
        .pagination-btn:hover {
            background: var(--primary-color);
        }
        
        .pagination-pages {
            display: flex;
            gap: 4px;
        }
        
        .pagination-page {
            padding: 8px 12px;
            background: var(--dark-300);
            border: none;
            border-radius: 4px;
            color: white;
            cursor: pointer;
            transition: background-color 0.3s ease;
        }
        
        .pagination-page.active {
            background: var(--primary-color);
        }
        
        .pagination-ellipsis {
            padding: 8px 4px;
            color: var(--light-100);
        }
        
        .permission-section {
            margin-top: 48px;
        }
        
        .section-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 24px;
        }
        
        .section-title {
            color: white;
            font-size: 20px;
            font-weight: 600;
            display: flex;
            align-items: center;
            gap: 8px;
        }
        
        .permissions-list {
            background: var(--dark-100);
            border: 1px solid var(--dark-200);
            border-radius: var(--border-radius);
            padding: 20px;
        }
        .permission-item {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 12px 0;
            border-bottom: 1px solid var(--dark-200);
        }
        .permission-item:last-child {
            border-bottom: none;
        }
        .permission-type .filter-select {
            background: var(--dark-200);
            border: 1px solid var(--dark-300);
            color: white;
            border-radius: 6px;
            padding: 8px 12px;
        }
        .switch {
            position: relative;
            display: inline-block;
            width: 44px;
            height: 24px;
        }
        .switch input {
            opacity: 0;
            width: 0;
            height: 0;
        }
        .slider {
            position: absolute;
            cursor: pointer;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: var(--dark-300);
            transition: var(--transition);
            border-radius: 24px;
        }
        .slider:before {
            content: "";
            position: absolute;
            height: 18px;
            width: 18px;
            left: 3px;
            top: 3px;
            background: var(--light-300);
            border-radius: 50%;
            transition: var(--transition);
        }
        .switch input:checked + .slider {
            background: var(--primary-color);
        }
        .switch input:checked + .slider:before {
            transform: translateX(20px);
            background: white;
        }
        
        .role-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 20px;
        }
        
        .role-card {
            background: var(--dark-100);
            border-radius: var(--border-radius);
            padding: 24px;
            border: 1px solid var(--dark-200);
        }
        
        .role-header {
            display: flex;
            justify-content: space-between;
            align-items: flex-start;
            margin-bottom: 16px;
        }
        
        .role-info {
            flex: 1;
        }
        
        .role-name {
            color: white;
            font-weight: 600;
            font-size: 16px;
            margin-bottom: 4px;
        }
        
        .role-desc {
            color: var(--light-100);
            font-size: 14px;
        }
        
        .role-count {
            background: var(--primary-color);
            color: white;
            padding: 4px 8px;
            border-radius: 4px;
            font-size: 12px;
            font-weight: 600;
        }
        
        .role-permissions {
            display: flex;
            flex-wrap: wrap;
            gap: 8px;
            margin-bottom: 20px;
        }
        
        .permission-tag {
            background: var(--dark-200);
            color: var(--light-100);
            padding: 4px 8px;
            border-radius: 4px;
            font-size: 12px;
        }
        
        .role-actions {
            display: flex;
            gap: 8px;
        }
        
        .log-section {
            margin-top: 48px;
        }
        
        .log-filters {
            display: flex;
            gap: 12px;
        }
        
        .filter-date {
            padding: 8px 12px;
            background: var(--dark-200);
            border: 1px solid var(--dark-300);
            border-radius: 6px;
            color: white;
            font-size: 14px;
        }
        
        .log-list {
            background: var(--dark-100);
            border-radius: var(--border-radius);
            border: 1px solid var(--dark-200);
            margin-top: 20px;
        }
        
        .log-item {
            display: flex;
            align-items: center;
            gap: 16px;
            padding: 20px;
            border-bottom: 1px solid var(--dark-200);
        }
        
        .log-item:last-child {
            border-bottom: none;
        }
        
        .log-avatar {
            width: 40px;
            height: 40px;
            background: var(--dark-300);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            color: var(--light-100);
        }
        
        .log-content {
            flex: 1;
        }
        
        .log-action {
            margin-bottom: 4px;
        }
        
        .log-user {
            color: white;
            font-weight: 600;
        }
        
        .log-operation {
            color: var(--light-100);
            margin-left: 8px;
        }
        
        .log-details {
            color: var(--light-100);
            font-size: 12px;
            margin-bottom: 4px;
        }
        
        .log-time {
            color: var(--light-100);
            font-size: 12px;
        }
        
        .log-status {
            display: flex;
            align-items: center;
            gap: 4px;
            font-size: 12px;
            font-weight: 500;
        }
        
        .log-status.success {
            color: var(--success-color);
        }
        
        .log-status.failed {
            color: var(--danger-color);
        }
        
        /* 模态框样式 */
        .modal {
            display: none;
            position: fixed;
            z-index: 50;
            left: 0;
            top: 0;
            width: 100%;
            height: 100%;
            overflow: auto;
            background-color: rgba(0,0,0,0.7);
            backdrop-filter: blur(4px);
            animation: fadeIn 0.3s ease;
            align-items: center;
            justify-content: center;
        }
        
        .modal-content {
            background-color: #2B2F36;
            margin: 15% auto;
            padding: 20px;
            border: 1px solid rgba(255, 255, 255, 0.1);
            width: 90%;
            max-width: 600px;
            border-radius: 12px;
            animation: slideUp 0.3s ease;
            max-height: 90vh;
            overflow-y: auto;
        }
        
        .close {
            color: #C9CDD4;
            float: right;
            font-size: 28px;
            font-weight: bold;
            cursor: pointer;
            transition: color 0.3s ease;
        }
        
        .close:hover, .close:focus {
            color: #FFFFFF;
        }
        
        /* 选择框样式 */
        select {
            background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' fill='none' viewBox='0 0 24 24' stroke-width='1.5' stroke='%23C9CDD4' class='w-5 h-5'%3E%3Cpath stroke-linecap='round' stroke-linejoin='round' d='M19.5 8.25l-7.5 7.5-7.5-7.5' /%3E%3C/svg%3E");
            background-repeat: no-repeat;
            background-position: right 0.5rem center;
            background-size: 1.5em 1.5em;
            padding-right: 2.5rem;
        }
        
        /* 动画效果 */
        @keyframes fadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
        }
        
        @keyframes slideUp {
            from { 
                transform: translateY(30px);
                opacity: 0;
            }
            to { 
                transform: translateY(0);
                opacity: 1;
            }
        }
        
        .modal-content.large {
            max-width: 800px;
        }
        
        .modal-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 20px 24px;
            border-bottom: 1px solid var(--dark-200);
        }
        
        .modal-title {
            color: white;
            font-size: 18px;
            font-weight: 600;
        }
        
        .modal-close {
            background: none;
            border: none;
            color: var(--light-100);
            font-size: 18px;
            cursor: pointer;
            padding: 4px;
        }
        
        .modal-body {
            padding: 24px;
        }
        
        .modal-footer {
            display: flex;
            justify-content: flex-end;
            gap: 12px;
            padding: 20px 24px;
            border-top: 1px solid var(--dark-200);
        }
        
        .user-form {
            display: flex;
            flex-direction: column;
            gap: 20px;
        }
        
        .form-row {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 20px;
        }
        
        .form-group {
            display: flex;
            flex-direction: column;
            gap: 8px;
        }
        
        .form-label {
            color: var(--light-100);
            font-size: 14px;
            font-weight: 500;
        }
        
        .form-input,
        .form-select,
        .form-textarea {
            padding: 12px 16px;
            background: var(--dark-200);
            border: 1px solid var(--dark-300);
            border-radius: 6px;
            color: white;
            font-size: 14px;
        }
        
        .form-input:focus,
        .form-select:focus,
        .form-textarea:focus {
            outline: none;
            border-color: var(--primary-color);
        }
        
        .form-textarea {
            resize: vertical;
            min-height: 80px;
        }
        
        @media (max-width: 768px) {
            .toolbar {
                flex-direction: column;
                align-items: stretch;
            }
            
            .toolbar-left {
                flex-direction: column;
                gap: 12px;
            }
            
            .search-box {
                min-width: auto;
            }
            
            .filter-group {
                flex-wrap: wrap;
            }
            
            .stats-overview {
                grid-template-columns: 1fr;
            }
            
            .role-grid {
                grid-template-columns: 1fr;
            }
            
            .form-row {
                grid-template-columns: 1fr;
            }
            
            .modal-content {
                width: 95%;
                margin: 20px;
            }
            
            .action-buttons {
                flex-wrap: wrap;
            }
        }
    </style>
    
    <script>
        // 控制俱乐部选择的显示/隐藏
        function toggleClubSelection() {
            const accountType = document.getElementById('account-type').value;
            const clubSelection = document.getElementById('club-selection');
            
            if (accountType === 'club-account') {
                clubSelection.style.display = 'block';
            } else {
                clubSelection.style.display = 'none';
                // 清空俱乐部选择
                document.getElementById('club').value = '';
            }
        }
    </script>
</body>
</html>

