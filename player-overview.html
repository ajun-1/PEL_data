<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>选手大盘数据 - PEL联盟生态数据大屏</title>
    
    <!-- 外部资源（改为本地依赖） -->
    <link rel="stylesheet" href="vendor/fontawesome/6.5.2/css/all.min.css">
    <link rel="stylesheet" href="vendor/fontawesome/6.5.2/css/v4-shims.min.css">
    <script src="js/echarts.min.js"></script>
    
    <!-- 本地样式 -->
    <link rel="stylesheet" href="css/main.css">
    
    <style>
        /* 页面容器 - 参考alliance-overview.html */
        .page-container {
            max-width: 1650px;
            margin: 0 auto;
            padding: 20px 40px;
        }
        
        .page-header {
            margin-bottom: 30px;
        }
        
        .page-title {
            font-size: 28px;
            font-weight: 600;
            color: #ffffff;
            margin: 0 0 8px 0;
        }
        
        .page-subtitle {
            font-size: 14px;
            color: #8892b0;
            margin: 0;
        }
        
        .star-players-section {
            background: #2E333B;
            border-radius: 12px;
            padding: 24px;
            margin-bottom: 32px;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.3);
            min-height: 900px; /* 继续增加高度确保完全包裹所有内容 */
            height: auto; /* 允许自动调整高度 */
        }
        
        .section-header {
            display: flex;
            align-items: center;
            justify-content: space-between;
            margin-bottom: 24px;
        }
        
        .section-title-group {
            display: flex;
            align-items: center;
            gap: 12px;
        }
        
        .section-icon {
            width: 24px;
            height: 24px;
            background: #FF6B35;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            color: #FFFFFF;
            font-size: 12px;
        }
        
        .section-title {
            font-size: 20px;
            font-weight: 600;
            color: #FFFFFF;
            margin: 0;
        }
        
        .view-all-link {
            color: #FF6B35;
            text-decoration: none;
            font-size: 14px;
            font-weight: 500;
            transition: color 0.3s ease;
        }
        
        .view-all-link:hover {
            color: #FF9500;
        }
        
        /* 明星选手展示区域 - 2x2网格布局 */
        .players-grid-horizontal {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            grid-template-rows: repeat(2, 1fr);
            gap: 20px;
            height: 700px; /* 继续增加网格高度确保完全包裹四个选手面板 */
            min-height: 700px; /* 增加最小高度保证 */
        }

        .player-card-horizontal {
             background: #1e2139;
             border: 1px solid #2a2d47;
             border-radius: 12px;
             padding: 16px;
             transition: all 0.3s ease;
             display: flex;
             flex-direction: column;
             gap: 12px;
             height: 100%; /* 确保卡片填充满网格单元格 */
         }

        .player-card-horizontal:hover {
            border-color: #64ffda;
            transform: translateY(-2px);
        }
        
        .player-header {
            display: flex;
            align-items: center;
            gap: 12px;
        }
        
        .player-avatar {
            position: relative;
        }
        
        .player-avatar-main {
            width: 45px;
            height: 45px;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            color: #ffffff;
            font-size: 14px;
            font-weight: 600;
        }
        
        .player-avatar-overlay {
            position: absolute;
            top: -5px;
            right: -5px;
            width: 18px;
            height: 18px;
            background: #64ffda;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            color: #0a192f;
            font-size: 9px;
            font-weight: 700;
        }
        
        .player-info {
            flex: 1;
        }
        
        .player-name {
            font-size: 16px;
            font-weight: 600;
            color: #ffffff;
            margin: 0 0 4px 0;
        }
        
        .player-team {
            display: flex;
            align-items: center;
            gap: 8px;
        }
        
        .team-badge {
            background: #64ffda;
            color: #0a192f;
            padding: 2px 6px;
            border-radius: 10px;
            font-size: 9px;
            font-weight: 600;
        }
        
        .team-name {
            font-size: 11px;
            color: #8892b0;
        }
        
        .player-stats {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 8px;
        }
        
        .stat-item {
            background: #2a2d47;
            border-radius: 6px;
            padding: 8px;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        
        .stat-label {
            font-size: 10px;
            color: #8892b0;
            margin: 0;
        }
        
        .stat-value {
            font-size: 12px;
            font-weight: 600;
            color: #ffffff;
        }
        
        .stat-value.highlight {
            color: #64ffda;
        }
        
        .stat-value.fans {
            color: #ffd700;
        }
        
       .stat-item .stat-value.rating-s {
             color: #ffffff;
             background: #ff6b6b;
             padding: 2px 6px;
             border-radius: 4px;
         }
        
        .player-ratings {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 6px;
        }
        
        .rating-badge {
            background: #2a2d47;
            border-radius: 6px;
            padding: 6px 8px;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        
        .rating-label {
            font-size: 9px;
            color: #8892b0;
        }
        
        .rating-value {
            font-size: 11px;
            font-weight: 700;
            padding: 2px 5px;
            border-radius: 3px;
        }
        
        .rating-s {
            background: #ff6b6b;
            color: #ffffff;
        }
        
        .rating-a {
            background: #4ecdc4;
            color: #ffffff;
        }
        
        .stats-grid {
            display: grid;
            grid-template-columns: repeat(4, 1fr);
            gap: 24px;
            margin-bottom: 32px;
        }
        
        .stat-card {
            background: #2E333B;
            border-radius: 8px;
            padding: 20px;
            text-align: center;
            box-shadow: 0px 2px 8px rgba(0, 0, 0, 0.1);
        }
        
        .stat-value {
            font-size: 32px;
            font-weight: 700;
            color: #FFFFFF;
            margin-bottom: 4px;
        }
        
        .stat-label {
            font-size: 14px;
            color: #C9CDD4;
            margin-bottom: 8px;
        }
        
        .stat-change {
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 4px;
            font-size: 12px;
            font-weight: 500;
        }
        
        .stat-change.positive {
            color: #00D4AA;
        }
        
        .stat-change.negative {
            color: #FF6B35;
        }
        
        /* 内容布局 */
        .content-layout {
            display: grid;
            grid-template-columns: 1fr 300px;
            gap: 20px;
            margin-top: 20px;
            min-height: 650px; /* 增加最小高度确保完全包含所有内容 */
        }

        /* 趋势与直播模块：上下堆叠布局（保留面板样式） */
        .trend-stream-layout { grid-template-columns: 1fr; }
        .trend-stream-layout .left-content,
        .trend-stream-layout .right-content { min-height: 1200px; }
        .trend-stream-layout .left-content { margin-bottom: 20px; }
        .trend-stream-layout .filter-controls { flex-wrap: wrap; }

        .left-content {
            background: #2a2d3a;
            border-radius: 8px;
            padding: 20px;
            border: 1px solid #3a3d4a;
            min-height: 620px; /* 确保左侧内容区域有足够高度包含所有选手卡片和底部链接 */
        }

        /* 新增：流量数据仪表板样式 */
        .traffic-section { margin-bottom: 20px; }
        .traffic-header { display: flex; justify-content: space-between; align-items: center; margin-bottom: 16px; }
        .traffic-selector { background: #3a3d4a; border: 1px solid #4a4d5a; border-radius: 6px; padding: 6px 12px; color: #E5E6EB; font-size: 14px; }
        .traffic-dashboard { display: grid; grid-template-columns: 1fr 2fr; gap: 20px; margin-bottom: 20px; }
        .fans-chart-container { background: #3a3d4a; border-radius: 8px; padding: 16px; text-align: center; }
        .fans-total { font-size: 24px; font-weight: bold; color: #E5E6EB; margin-bottom: 8px; }
        .fans-label { font-size: 12px; color: #9CA3AF; margin-bottom: 16px; }
        .chart-placeholder { width: 120px; height: 120px; margin: 0 auto 12px; background: conic-gradient(#00D4AA 0deg 180deg, #8B5CF6 180deg 270deg, #60A5FA 270deg 360deg); border-radius: 50%; position: relative; }
        .chart-placeholder::after { content: ''; position: absolute; top: 30px; left: 30px; width: 60px; height: 60px; background: #3a3d4a; border-radius: 50%; }
        .platform-legends { display: flex; justify-content: center; gap: 16px; font-size: 12px; }
        .legend-item { display: flex; align-items: center; gap: 4px; }
        .legend-color { width: 12px; height: 12px; border-radius: 2px; }
        .legend-weibo { background: #00D4AA; }
        .legend-douyin { background: #8B5CF6; }
        .legend-kuaishou { background: #60A5FA; }
        .fans-table-container { background: #3a3d4a; border-radius: 8px; padding: 16px; }
        .table-header { display: flex; justify-content: space-between; align-items: center; margin-bottom: 12px; }
        .table-title { font-size: 14px; color: #E5E6EB; font-weight: 500; }
        .date-filter { background: #4a4d5a; border: 1px solid #5a5d6a; border-radius: 4px; padding: 4px 8px; color: #E5E6EB; font-size: 12px; }
        .fans-table { width: 100%; border-collapse: collapse; }
        .fans-table th, .fans-table td { padding: 8px 12px; text-align: right; border-bottom: 1px solid #4a4d5a; }
        .fans-table th { background: #4a4d5a; color: #9CA3AF; font-size: 12px; font-weight: 500; }
        .fans-table td { color: #E5E6EB; font-size: 13px; }
        .fans-table td:first-child { text-align: left; }
        .table-summary { display: flex; justify-content: space-between; margin-top: 12px; padding-top: 8px; border-top: 1px solid #4a4d5a; font-size: 12px; color: #9CA3AF; }

        /* 事件面板 */
        .events-panel .panel-header {
            display: flex;
            align-items: center;
            gap: 8px;
            margin-bottom: 20px;
        }

        .events-panel .panel-header i {
            color: #fbbf24;
            font-size: 16px;
        }

        .events-panel .panel-header h3 {
            color: #ffffff;
            font-size: 16px;
            font-weight: 600;
            margin: 0;
        }

        .events-list {
            display: flex;
            flex-direction: column;
            gap: 16px;
            margin-bottom: 20px;
        }

        .event-item {
            display: flex;
            align-items: flex-start;
            gap: 12px;
            padding: 12px;
            border-radius: 6px;
            border-left: 3px solid;
        }

        .event-item.event-red {
            background: rgba(239, 68, 68, 0.1);
            border-left-color: #ef4444;
        }

        .event-item.event-green {
            background: rgba(34, 197, 94, 0.1);
            border-left-color: #22c55e;
        }

        .event-item.event-yellow {
            background: rgba(251, 191, 36, 0.1);
            border-left-color: #fbbf24;
        }

        .event-indicator {
            width: 8px;
            height: 8px;
            border-radius: 50%;
            margin-top: 6px;
            flex-shrink: 0;
        }

        .event-red .event-indicator {
            background: #ef4444;
        }

        .event-green .event-indicator {
            background: #22c55e;
        }

        .event-yellow .event-indicator {
            background: #fbbf24;
        }

        .event-content {
            flex: 1;
        }

        .event-title {
            color: #ffffff;
            font-size: 14px;
            font-weight: 500;
            margin-bottom: 4px;
        }

        .event-desc {
            color: #8b8d97;
            font-size: 12px;
            line-height: 1.4;
        }

        .panel-footer {
            text-align: center;
            padding-top: 16px;
            border-top: 1px solid #3a3d4a;
        }
        
        .section-footer {
            text-align: center;
            padding-top: 46px; /* 从16px增加到46px，向下移动30px */
            border-top: 1px solid #3a3d4a;
        }

        .footer-text {
            color: #60a5fa;
            font-size: 14px;
            cursor: pointer;
            /* 移除margin-top，改用父容器的padding-top控制位置 */
        }
        
        .chart-container {
            background: #2E333B;
            border-radius: 12px;
            padding: 24px;
            margin-bottom: 32px;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.3);
        }
        
        .chart-title {
            font-size: 18px;
            font-weight: 600;
            color: #FFFFFF;
            margin-bottom: 20px;
        }
        
        .chart {
            width: 100%;
            height: 400px;
        }
        /* 新增：响应式高度优化 */
        @media (max-width: 1024px) {
            .chart { height: 320px; }
        }
        @media (max-width: 768px) {
            .chart { height: 280px; }
        }
        /* 新增：过滤控件样式 */
        .filter-controls {
            display: flex;
            gap: 16px;
            align-items: center;
        }

        .filter-group {
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .filter-group span {
            color: #C9CDD4;
            font-size: 14px;
        }

        .filter-select {
            background: #1E2329;
            border: 1px solid #4E5969;
            border-radius: 6px;
            color: #FFFFFF;
            padding: 6px 12px;
            font-size: 14px;
            outline: none;
        }

        .filter-select:focus {
            border-color: #165DFF;
        }

        .toggle-group {
            display: flex;
            gap: 8px;
        }

        .toggle-btn {
            background: #1E2329;
            border: 1px solid #4E5969;
            border-radius: 6px;
            color: #C9CDD4;
            padding: 6px 12px;
            font-size: 14px;
            cursor: pointer;
            transition: all 0.2s;
        }

        .toggle-btn:hover {
            border-color: #165DFF;
            color: #FFFFFF;
        }

        .toggle-btn.active {
            background: #165DFF;
            border-color: #165DFF;
            color: #FFFFFF;
        }

        /* 涨粉数据模块样式 */
        .growth-data-section {
            background: #2E333B;
            border-radius: 12px;
            padding: 24px;
            margin-bottom: 32px;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.3);
        }

        .growth-content {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 24px;
            margin-top: 24px;
        }

        .growth-chart-container {
            background: #1E2329;
            border-radius: 8px;
            padding: 20px;
        }

        .growth-table-wrapper {
            background: #1E2329;
            border-radius: 8px;
            overflow: hidden;
        }

        .growth-table {
            width: 100%;
            border-collapse: collapse;
        }

        .growth-table th {
            background: #2E333B;
            color: #C9CDD4;
            font-size: 14px;
            font-weight: 600;
            padding: 12px 8px;
            text-align: left;
            border-bottom: 1px solid #4E5969;
        }

        .growth-table td {
            color: #FFFFFF;
            font-size: 14px;
            padding: 12px 8px;
            border-bottom: 1px solid #4E5969;
        }

        .growth-table tbody tr:last-child td {
            border-bottom: none;
        }

        .growth-table tr:hover {
            background: rgba(22, 93, 255, 0.1);
        }

        .growth-positive {
            color: #00D4AA;
            font-weight: 600;
        }

        .growth-negative {
            color: #FF6B6B;
            font-weight: 600;
        }

        .growth-summary {
            display: flex;
            justify-content: space-around;
            padding: 16px;
            background: #2E333B;
            border-top: 1px solid #4E5969;
        }

        .summary-item {
            text-align: center;
        }

        .summary-label {
            display: block;
            color: #C9CDD4;
            font-size: 12px;
            margin-bottom: 4px;
        }

        .summary-value {
            color: #FFFFFF;
            font-size: 16px;
            font-weight: 600;
        }

        @media (max-width: 1024px) {
            .growth-content {
                grid-template-columns: 1fr;
            }
            
            .growth-summary {
                flex-direction: column;
                gap: 12px;
            }
        }

        @media (max-width: 768px) {
            .growth-table th,
            .growth-table td {
                padding: 8px 4px;
                font-size: 12px;
            }
        }
        .filter-controls {
            display: flex;
            align-items: center;
            gap: 12px;
            margin-bottom: 16px;
        }
        .filter-group {
            display: flex;
            align-items: center;
            gap: 8px;
            color: #C9CDD4;
            font-size: 12px;
        }
        .filter-select {
            background: #2a2d3a;
            border: 1px solid #3a3d4a;
            color: #ffffff;
            border-radius: 6px;
            padding: 6px 10px;
            font-size: 12px;
        }
        .toggle-group {
            display: flex;
            align-items: center;
            gap: 8px;
        }
        .toggle-btn {
            background: #2a2d3a;
            border: 1px solid #3a3d4a;
            color: #C9CDD4;
            border-radius: 6px;
            padding: 6px 10px;
            font-size: 12px;
            cursor: pointer;
        }
        .toggle-btn.active {
            background: #60a5fa;
            border-color: #60a5fa;
            color: #ffffff;
        }
        
        @media (max-width: 768px) {
            .players-grid {
                grid-template-columns: 1fr;
            }
            
            .stats-overview {
                grid-template-columns: 1fr 1fr;
            }
            
            .player-stats {
                grid-template-columns: 1fr;
            }
        }
    /* 收入数据可视化样式 */
        .revenue-section {
            margin-top: 30px;
            background: #2E333B;
            border-radius: 12px;
            padding: 24px;
            border: 1px solid #4E5969;
        }

        .revenue-charts-container {
            display: flex;
            flex-direction: column;
            gap: 24px;
            margin-top: 20px;
        }

        .revenue-chart-item {
            background: #3A3F4B;
            border-radius: 8px;
            padding: 20px;
            border: 1px solid #4E5969;
            transition: all 0.3s ease;
            cursor: pointer;
        }

        .revenue-chart-item:hover {
            border-color: #FF6B35;
            box-shadow: 0 4px 12px rgba(255, 107, 53, 0.15);
            transform: translateY(-2px);
        }

        /* 收入来源占比饼图样式 */
        .revenue-pie-container {
            text-align: center;
        }

        .revenue-total {
            font-size: 32px;
            font-weight: bold;
            color: #FFFFFF;
            margin-bottom: 8px;
        }

        .revenue-label {
            font-size: 14px;
            color: #E5E6EB;
            margin-bottom: 20px;
        }

        .pie-chart-placeholder {
            width: 180px;
            height: 180px;
            margin: 0 auto 20px;
            border-radius: 50%;
            background: conic-gradient(
                #FF8C42 0deg 144deg,
                #8B5CF6 144deg 252deg,
                #06D6A0 252deg 360deg
            );
            position: relative;
        }

        .pie-chart-placeholder::after {
            content: '';
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            width: 100px;
            height: 100px;
            background: #3A3F4B;
            border-radius: 50%;
        }

        .revenue-legends {
            display: flex;
            flex-direction: column;
            gap: 8px;
            align-items: center;
        }

        .legend-business { background: #FF8C42; }
        .legend-ip { background: #8B5CF6; }
        .legend-stream { background: #06D6A0; }

        /* 柱状图样式 */
        .revenue-bar-container,
        .revenue-combo-container {
            height: 100%;
        }

        .chart-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 16px;
        }

        .chart-title {
            font-size: 16px;
            font-weight: 600;
            color: #FFFFFF;
        }

        .date-filter {
            background: #4E5969;
            border: 1px solid #6B7280;
            border-radius: 4px;
            color: #E5E6EB;
            padding: 4px 8px;
            font-size: 12px;
        }

        .chart-legend {
            display: flex;
            gap: 16px;
            margin-bottom: 16px;
            justify-content: center;
        }

        .legend-revenue { background: #FF8C42; }
        .legend-business-outline { background: #FF8C42; }
        .legend-ip-outline { background: #8B5CF6; }
        .legend-stream-outline { background: #06D6A0; }

        /* 柱状图容器 */
        .bar-chart-placeholder,
        .combo-chart-placeholder {
            display: flex;
            height: 200px;
            position: relative;
        }

        /* 组合图表包装器 */
        .combo-chart-wrapper {
            display: flex;
            height: 200px;
            position: relative;
        }

        .combo-chart-content {
            flex: 1;
            position: relative;
        }

        .y-axis {
            display: flex;
            flex-direction: column;
            justify-content: space-between;
            width: 40px;
            font-size: 10px;
            color: #9CA3AF;
            padding-right: 8px;
        }

        .y-axis-right {
            display: flex;
            flex-direction: column;
            justify-content: space-between;
            width: 50px;
            font-size: 10px;
            color: #9CA3AF;
            padding-left: 8px;
        }

        .stream-bars-container {
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 30px;
            display: flex;
            align-items: flex-end;
            gap: 8px;
            padding: 0 8px;
            z-index: 1;
        }

        .stream-bar-item {
            flex: 1;
            display: flex;
            flex-direction: column;
            align-items: center;
            height: 100%;
            justify-content: flex-end;
        }

        .stream-bar {
            width: 60%;
            background: #06D6A0;
            border-radius: 2px 2px 0 0;
            min-height: 4px;
            opacity: 0.8;
            transition: all 0.6s ease;
        }

        .stream-bar:hover {
            opacity: 1;
        }

        .bars-container,
        .combo-bars-container {
            flex: 1;
            display: flex;
            align-items: flex-end;
            gap: 8px;
            padding: 0 8px;
        }

        .bar-item,
        .combo-bar-item {
            flex: 1;
            display: flex;
            flex-direction: column;
            align-items: center;
            height: 100%;
            justify-content: flex-end;
        }

        .bar {
            width: 100%;
            background: #FF8C42;
            border-radius: 2px 2px 0 0;
            min-height: 4px;
        }

        .bar-item span,
        .combo-bar-item span {
            font-size: 10px;
            color: #9CA3AF;
            margin-top: 8px;
            transform: rotate(-45deg);
            white-space: nowrap;
        }

        /* 堆叠柱状图样式 */
        .stacked-bar {
            width: 100%;
            height: 100%;
            display: flex;
            flex-direction: column-reverse;
            border-radius: 2px 2px 0 0;
            overflow: hidden;
        }

        .bar-segment {
            width: 100%;
        }

        /* 单独柱状图样式 */
        .single-bar {
            width: 100%;
            border-radius: 2px 2px 0 0;
            min-height: 4px;
            transition: all 0.6s ease;
        }

        .single-bar.stream {
            background: #06D6A0;
        }

        .bar-business { background: #FF8C42; }
        .bar-ip { background: #8B5CF6; }
        .bar-stream { background: #06D6A0; }

        /* 折线图覆盖层 */
        .line-chart-overlay {
            position: absolute;
            top: 0;
            left: 48px;
            right: 16px;
            bottom: 30px;
            pointer-events: none;
        }

        /* X轴标签样式 */
        .x-axis-labels {
            display: flex;
            justify-content: space-between;
            align-items: flex-end;
            height: 100%;
            padding: 0 8px;
            margin-left: 48px;
            margin-right: 16px;
        }

        .x-axis-labels span {
            font-size: 10px;
            color: #9CA3AF;
            transform: rotate(-45deg);
            white-space: nowrap;
            margin-bottom: 8px;
        }

        /* 数据点容器 */
        .data-points-container {
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            pointer-events: none;
        }

        /* 数据点样式 */
        .data-point {
            position: absolute;
            width: 8px;
            height: 8px;
            border-radius: 50%;
            opacity: 0;
            animation: fadeInPoint 1.5s ease forwards;
            cursor: pointer;
            pointer-events: auto;
            transition: all 0.3s ease;
            transform: translate(-50%, -50%);
        }

        .data-point:hover {
            width: 12px;
            height: 12px;
            opacity: 1;
        }

        .business-point {
            background-color: #FF8C42;
            animation-delay: 0.3s;
        }

        .ip-point {
            background-color: #8B5CF6;
            animation-delay: 0.6s;
        }

        .stream-point {
            background-color: #06D6A0;
            animation-delay: 0.9s;
        }

        /* 线条动画 */
        .line-business,
        .line-ip {
            stroke-dasharray: 1000;
            stroke-dashoffset: 1000;
            animation: drawLine 2s ease forwards;
        }

        .line-business {
            animation-delay: 0.2s;
        }

        .line-ip {
            animation-delay: 0.4s;
        }

        /* 曲线动画 */
        .curve-stream {
            stroke-dasharray: 1000;
            stroke-dashoffset: 1000;
            animation: drawCurve 2.5s ease forwards;
            animation-delay: 0.6s;
        }

        @keyframes fadeInPoint {
            to {
                opacity: 1;
            }
        }

        @keyframes drawLine {
            to {
                stroke-dashoffset: 0;
            }
        }

        @keyframes drawCurve {
            to {
                stroke-dashoffset: 0;
            }
        }

        .data-points-container {
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            height: 100%;
            pointer-events: none;
            z-index: 2;
        }

        .line-svg {
            width: 100%;
            height: 100%;
        }

        .line-svg circle:hover {
            r: 3;
        }

        /* 响应式布局 */
        @media (max-width: 1200px) {
            .revenue-charts-container {
                flex-direction: column;
                gap: 20px;
            }
            
            .revenue-chart-item {
                flex: none;
            }
        }

        @media (max-width: 768px) {
            .revenue-section {
                padding: 16px;
            }
            
            .pie-chart-placeholder {
                width: 140px;
                height: 140px;
            }
            
            .pie-chart-placeholder::after {
                width: 80px;
                height: 80px;
            }
            
            .revenue-total {
                font-size: 24px;
            }
            
            .bar-chart-placeholder,
            .combo-chart-placeholder {
                height: 160px;
            }
        }

        </style>
</head>
<body>
    <!-- 顶部导航：由 common.js 动态生成 -->
    <header class="top-nav"></header>

    <!-- 侧边栏导航 -->
    <aside class="sidebar">
        <div class="sidebar-content">
            <div class="sidebar-section">
                <div class="sidebar-section-title">主菜单</div>
                <div class="sidebar-menu">
                    <!-- 联盟生态下拉菜单 -->
                    <div class="sidebar-dropdown">
                        <div class="sidebar-item sidebar-dropdown-toggle">
                            <div style="display: flex; align-items: center;">
                                <span>联盟生态</span>
                            </div>
                        </div>
                        <div class="sidebar-submenu">
                            <a href="alliance-overview.html" class="sidebar-submenu-item">
                                <span>联盟生态大盘</span>
                            </a>
                            <div class="sidebar-dropdown">
                                <div class="sidebar-submenu-item sidebar-dropdown-toggle">
                                    <div style="display: flex; align-items: center;">
                                        <span>联盟生态深度分析</span>
                                    </div>
                                </div>
                                <div class="sidebar-submenu">
                                    <a href="alliance-dimension.html" class="sidebar-submenu-item">
                                        <span>分析报告</span>
                                    </a>
                                    <a href="alliance-indicators.html" class="sidebar-submenu-item">
                                        <span>细分指标</span>
                                    </a>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <!-- 俱乐部生态 -->
                    <a href="club-overview.html" class="sidebar-item">
                        <span>俱乐部生态</span>
                    </a>
                    
                    <!-- 选手生态 -->
                    <a href="player-overview.html" class="sidebar-item active">
                        <span>选手生态</span>
                    </a>
                    
                    <!-- 赛事数据 -->
                    <a href="match-data.html" class="sidebar-item">
                        <span>赛事数据</span>
                    </a>
                </div>
            </div>
            
            <div class="sidebar-section">
                <div class="sidebar-section-title">系统设置</div>
                <div class="sidebar-menu">
                    <!-- 数据导入 -->
                    <a href="data-import.html" class="sidebar-item">
                        <span>数据导入</span>
                    </a>
                    
                    <!-- 系统配置 -->
                    <a href="system-settings.html" class="sidebar-item">
                        <span>系统配置</span>
                    </a>
                </div>
            </div>
        </div>
    </aside>

    <!-- 主内容区域 -->
    <main class="main-content">
        <div class="page-container">
            <!-- 页面标题部分 -->
            <div class="page-header">
                <h1 class="page-title">选手管理——大盘数据</h1>
                <p class="page-subtitle">全面掌握联盟选手数据，包括选手状态、培养情况、商业价值等信息</p>
            </div>

            <!-- 统计卡片部分 -->
            <div class="stats-grid">
                <div class="stat-card">
                    <div class="stat-value">256</div>
                    <div class="stat-label">选手总数</div>
                    <div class="stat-change positive">
                        <i class="fa fa-arrow-up"></i>
                        <span>+2.5%</span>
                    </div>
                </div>
                
                <div class="stat-card">
                    <div class="stat-value">136</div>
                    <div class="stat-label">青训选手</div>
                    <div class="stat-change positive">
                        <i class="fa fa-arrow-up"></i>
                        <span>+5.6%</span>
                    </div>
                </div>
                
                <div class="stat-card">
                    <div class="stat-value">16</div>
                    <div class="stat-label">明星选手</div>
                    <div class="stat-change positive">
                        <i class="fa fa-arrow-up"></i>
                        <span>+18.8%</span>
                    </div>
                </div>
                
                <div class="stat-card">
                    <div class="stat-value">36</div>
                    <div class="stat-label">退役选手</div>
                    <div class="stat-change positive">
                        <i class="fa fa-arrow-up"></i>
                        <span>+10.3%</span>
                    </div>
                </div>
            </div>

            <!-- 主要内容区域 -->
            <div class="content-layout">
                <!-- 左侧：明星选手展示 -->
                <div class="left-content">
                    <section class="star-players-section">
                        <div class="section-header">
                            <div class="section-title-group">
                                <i class="section-icon fa fa-star"></i>
                                <h2 class="section-title">明星选手展示（身价排行）</h2>
                            </div>
                        </div>
                        
                        <div class="players-grid-horizontal">
                            <!-- 选手卡片 -->
                            <div class="player-card-horizontal">
                                <div class="player-header">
                                    <div class="player-avatar">
                                        <div class="player-avatar-main">诚C</div>
                                        <div class="player-avatar-overlay">1</div>
                                    </div>
                                    <div class="player-info">
                                        <h3 class="player-name">诚C</h3>
                                        <div class="player-team">
                                            <span class="team-badge">PEL联盟</span>
                                            <span class="team-name">4AM战队</span>
                                        </div>
                                    </div>
                                </div>
                                
                                <div class="player-stats">
                                    <div class="stat-item">
                                        <span class="stat-label">身价估值</span>
                                        <span class="stat-value highlight">2000万</span>
                                    </div>
                                    <div class="stat-item">
                                        <span class="stat-label">粉丝数量</span>
                                        <span class="stat-value fans">200万</span>
                                    </div>
                                    <div class="stat-item">
                                        <span class="stat-label">综合评级</span>
                                        <span class="stat-value rating-s">S级</span>
                                    </div>
                                    <div class="stat-item">
                                        <span class="stat-label">商业价值</span>
                                        <span class="stat-value highlight">S级</span>
                                    </div>
                                </div>
                                
                                <div class="player-ratings">
                                    <div class="rating-badge">
                                        <span class="rating-label">全球排名</span>
                                        <span class="rating-value rating-s">S</span>
                                    </div>
                                    <div class="rating-badge">
                                        <span class="rating-label">击杀能力</span>
                                        <span class="rating-value rating-a">A</span>
                                    </div>
                                    <div class="rating-badge">
                                        <span class="rating-label">生存能力</span>
                                        <span class="rating-value rating-s">S</span>
                                    </div>
                                    <div class="rating-badge">
                                        <span class="rating-label">团队配合</span>
                                        <span class="rating-value rating-s">S</span>
                                    </div>
                                </div>
                            </div>

                            <!-- 更多选手卡片 -->
                            <div class="player-card-horizontal">
                                <div class="player-header">
                                    <div class="player-avatar">
                                        <div class="player-avatar-main">小鹿</div>
                                        <div class="player-avatar-overlay">2</div>
                                    </div>
                                    <div class="player-info">
                                        <h3 class="player-name">小鹿</h3>
                                        <div class="player-team">
                                            <span class="team-badge">PEL联盟</span>
                                            <span class="team-name">4AM战队</span>
                                        </div>
                                    </div>
                                </div>
                                
                                <div class="player-stats">
                                    <div class="stat-item">
                                        <span class="stat-label">身价估值</span>
                                        <span class="stat-value highlight">1800万</span>
                                    </div>
                                    <div class="stat-item">
                                        <span class="stat-label">粉丝数量</span>
                                        <span class="stat-value fans">180万</span>
                                    </div>
                                    <div class="stat-item">
                                        <span class="stat-label">综合评级</span>
                                        <span class="stat-value rating-s">S级</span>
                                    </div>
                                    <div class="stat-item">
                                        <span class="stat-label">商业价值</span>
                                        <span class="stat-value highlight">A级</span>
                                    </div>
                                </div>
                                
                                <div class="player-ratings">
                                    <div class="rating-badge">
                                        <span class="rating-label">全球排名</span>
                                        <span class="rating-value rating-s">S</span>
                                    </div>
                                    <div class="rating-badge">
                                        <span class="rating-label">击杀能力</span>
                                        <span class="rating-value rating-s">S</span>
                                    </div>
                                    <div class="rating-badge">
                                        <span class="rating-label">生存能力</span>
                                        <span class="rating-value rating-a">A</span>
                                    </div>
                                    <div class="rating-badge">
                                        <span class="rating-label">团队配合</span>
                                        <span class="rating-value rating-a">A</span>
                                    </div>
                                </div>
                            </div>

                            <div class="player-card-horizontal">
                                <div class="player-header">
                                    <div class="player-avatar">
                                        <div class="player-avatar-main">永远</div>
                                        <div class="player-avatar-overlay">3</div>
                                    </div>
                                    <div class="player-info">
                                        <h3 class="player-name">永远</h3>
                                        <div class="player-team">
                                            <span class="team-badge">PEL联盟</span>
                                            <span class="team-name">4AM战队</span>
                                        </div>
                                    </div>
                                </div>
                                
                                <div class="player-stats">
                                    <div class="stat-item">
                                        <span class="stat-label">身价估值</span>
                                        <span class="stat-value highlight">1600万</span>
                                    </div>
                                    <div class="stat-item">
                                        <span class="stat-label">粉丝数量</span>
                                        <span class="stat-value fans">160万</span>
                                    </div>
                                    <div class="stat-item">
                                        <span class="stat-label">综合评级</span>
                                        <span class="stat-value rating-a">A级</span>
                                    </div>
                                    <div class="stat-item">
                                        <span class="stat-label">商业价值</span>
                                        <span class="stat-value highlight">A级</span>
                                    </div>
                                </div>
                                
                                <div class="player-ratings">
                                    <div class="rating-badge">
                                        <span class="rating-label">全球排名</span>
                                        <span class="rating-value rating-a">A</span>
                                    </div>
                                    <div class="rating-badge">
                                        <span class="rating-label">击杀能力</span>
                                        <span class="rating-value rating-a">A</span>
                                    </div>
                                    <div class="rating-badge">
                                        <span class="rating-label">生存能力</span>
                                        <span class="rating-value rating-s">S</span>
                                    </div>
                                    <div class="rating-badge">
                                        <span class="rating-label">团队配合</span>
                                        <span class="rating-value rating-s">S</span>
                                    </div>
                                </div>
                            </div>

                            <div class="player-card-horizontal">
                                <div class="player-header">
                                    <div class="player-avatar">
                                        <div class="player-avatar-main">韦神</div>
                                        <div class="player-avatar-overlay">4</div>
                                    </div>
                                    <div class="player-info">
                                        <h3 class="player-name">韦神</h3>
                                        <div class="player-team">
                                            <span class="team-badge">PEL联盟</span>
                                            <span class="team-name">4AM战队</span>
                                        </div>
                                    </div>
                                </div>
                                
                                <div class="player-stats">
                                    <div class="stat-item">
                                        <span class="stat-label">身价估值</span>
                                        <span class="stat-value highlight">1500万</span>
                                    </div>
                                    <div class="stat-item">
                                        <span class="stat-label">粉丝数量</span>
                                        <span class="stat-value fans">150万</span>
                                    </div>
                                    <div class="stat-item">
                                        <span class="stat-label">综合评级</span>
                                        <span class="stat-value rating-a">A级</span>
                                    </div>
                                    <div class="stat-item">
                                        <span class="stat-label">商业价值</span>
                                        <span class="stat-value highlight">A级</span>
                                    </div>
                                </div>
                                
                                <div class="player-ratings">
                                    <div class="rating-badge">
                                        <span class="rating-label">全球排名</span>
                                        <span class="rating-value rating-a">A</span>
                                    </div>
                                    <div class="rating-badge">
                                        <span class="rating-label">击杀能力</span>
                                        <span class="rating-value rating-s">S</span>
                                    </div>
                                    <div class="rating-badge">
                                        <span class="rating-label">生存能力</span>
                                        <span class="rating-value rating-a">A</span>
                                    </div>
                                    <div class="rating-badge">
                                        <span class="rating-label">团队配合</span>
                                        <span class="rating-value rating-a">A</span>
                                    </div>
                                </div>
                            </div>
                        </div>
                        
                        <div class="section-footer">
                            <span class="footer-text">查看全部选手</span>
                        </div>
                    </section>
                </div>

                <!-- 右侧：事件面板 -->
                <div class="right-content">
                    <section class="events-panel">
                        <div class="panel-header">
                            <i class="fa fa-bell"></i>
                            <h3>重大事件</h3>
                        </div>
                        
                        <div class="events-list">
                            <div class="event-item event-red">
                                <div class="event-indicator"></div>
                                <div class="event-content">
                                    <div class="event-title">XX选手违规事件处理</div>
                                    <div class="event-desc">选手违规，需要进行处理，处理结果将影响选手评级</div>
                                </div>
                            </div>
                                                        <div class="event-item event-red">
                                <div class="event-indicator"></div>
                                <div class="event-content">
                                    <div class="event-title">XX选手违规事件处理</div>
                                    <div class="event-desc">选手违规，需要进行处理，处理结果将影响选手评级</div>
                                </div>
                            </div>
                                                        <div class="event-item event-red">
                                <div class="event-indicator"></div>
                                <div class="event-content">
                                    <div class="event-title">XX选手违规事件处理</div>
                                    <div class="event-desc">选手违规，需要进行处理，处理结果将影响选手评级</div>
                                </div>
                                
                            </div>
                            <div class="event-item event-green">
                                <div class="event-indicator"></div>
                                <div class="event-content">
                                    <div class="event-title">XX选手目标</div>
                                    <div class="event-desc">2024年3月1日，选手目标达成度为38000</div>
                                </div>
                            </div>
                            
                            <div class="event-item event-yellow">
                                <div class="event-indicator"></div>
                                <div class="event-content">
                                    <div class="event-title">XX选手关键事件提醒</div>
                                    <div class="event-desc">2024年3月1日，选手关键事件需要关注</div>
                                </div>
                            </div>
                        </div>
                                            <div class="events-list">
                            <div class="event-item event-red">
                                <div class="event-indicator"></div>
                                <div class="event-content">
                                    <div class="event-title">XX选手违规事件处理</div>
                                    <div class="event-desc">选手违规，需要进行处理，处理结果将影响选手评级</div>
                                </div>
                            </div>
                                                    <div class="events-list">
                            <div class="event-item event-red">
                                <div class="event-indicator"></div>
                                <div class="event-content">
                                    <div class="event-title">XX选手违规事件处理</div>
                                    <div class="event-desc">选手违规，需要进行处理，处理结果将影响选手评级</div>
                                </div>
                            </div>
                                                    <div class="events-list">
                            <div class="event-item event-red">
                                <div class="event-indicator"></div>
                                <div class="event-content">
                                    <div class="event-title">XX选手违规事件处理</div>
                                    <div class="event-desc">选手违规，需要进行处理，处理结果将影响选手评级</div>
                                </div>
                            </div>
                        <div class="panel-footer">
                            <span class="footer-text">查看全部事件</span>
                        </div>
                    </section>
                </div>
            </div>

            <!-- 新增：趋势与直播模块（与上方双列布局一致） -->
            <div class="content-layout trend-stream-layout">
                <!-- 左：全网热度与曝光量趋势 -->
                <div class="left-content">
                    <section class="traffic-section">
                        <div class="section-header">
                            <div class="section-title-group">
                                <i class="section-icon fa fa-bar-chart"></i>
                                <h2 class="section-title">流量数据</h2>
                            </div>
                        </div>
                        <div class="traffic-header">
                            <span style="color: #E5E6EB; font-size: 14px;">正式选手</span>

                        </div>
                        <div class="traffic-dashboard">
                            <div class="fans-chart-container">
                                <div class="fans-total">234W</div>
                                <div class="fans-label">全网粉丝数量</div>
                                <div class="chart-placeholder"></div>
                                <div class="platform-legends">
                                    <div class="legend-item">
                                        <div class="legend-color legend-weibo"></div>
                                        <span style="color: #E5E6EB;">微博</span>
                                    </div>
                                    <div class="legend-item">
                                        <div class="legend-color legend-douyin"></div>
                                        <span style="color: #E5E6EB;">抖音</span>
                                    </div>
                                    <div class="legend-item">
                                        <div class="legend-color legend-kuaishou"></div>
                                        <span style="color: #E5E6EB;">快手</span>
                                    </div>
                                </div>
                            </div>
                            <div class="fans-table-container">
                                <div class="table-header">
                                    <span class="table-title">涨粉数据</span>
                                    <select class="date-filter">
                                        <option>近七日数据</option>
                                    </select>
                                </div>
                                <table class="fans-table">
                                    <thead>
                                        <tr>
                                            <th>日期</th>
                                            <th>抖音涨粉</th>
                                            <th>快手涨粉</th>
                                            <th>微博涨粉</th>
                                            <th>总计涨粉</th>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        <tr><td>2025-09-30</td><td>1,326</td><td>627</td><td>497</td><td>2,715</td></tr>
                                        <tr><td>2025-10-01</td><td>931</td><td>933</td><td>359</td><td>2,401</td></tr>
                                        <tr><td>2025-10-02</td><td>528</td><td>451</td><td>181</td><td>1,525</td></tr>
                                        <tr><td>2025-10-03</td><td>1,614</td><td>716</td><td>224</td><td>2,824</td></tr>
                                        <tr><td>2025-10-04</td><td>814</td><td>312</td><td>346</td><td>1,713</td></tr>
                                        <tr><td>2025-10-05</td><td>686</td><td>564</td><td>409</td><td>2,014</td></tr>
                                        <tr><td>2025-10-06</td><td>588</td><td>933</td><td>439</td><td>2,216</td></tr>
                                    </tbody>
                                </table>
                                <div class="table-summary">
                                    <span>总计涨粉: 15,408</span>
                                    <span>平均日涨粉: 2,201</span>
                                </div>
                            </div>
                        </div>
                    </section>
                    
                    
                    
                    <section>
                        <div class="section-header">
                            <div class="section-title-group">
                                <i class="section-icon fa fa-line-chart"></i>
                                <h2 class="section-title">全网热度与曝光量趋势</h2>
                            </div>
                            <div class="filter-controls">
                                <div class="filter-group">
                                    <span>时间范围</span>
                                    <select id="heatRangeSelect" class="filter-select">
                                        <option value="7">近7日</option>
                                        <option value="30">近30日</option>
                                    </select>
                                </div>
                                <div class="toggle-group">
                                    <button id="toggleAllPlatforms" class="toggle-btn active">全量（快手、抖音、微博）</button>
                                    <button id="toggleSinglePlatform" class="toggle-btn">单平台</button>
                                    <select id="platformSelect" class="filter-select" style="display:none">
                                        <option value="kuaishou">快手</option>
                                        <option value="douyin">抖音</option>
                                        <option value="weibo">微博</option>
                                    </select>
                                </div>
                            </div>
                        </div>
                        <div class="chart-container">
                            <div id="heatExposureChart" class="chart"></div>
                        </div>
                    </section>
                                    <!-- 右：直播数据（所有选手） -->

                    <section>
                        <div class="section-header">
                            <div class="section-title-group">
                                <i class="section-icon fa fa-bar-chart"></i>
                                <h2 class="section-title">直播数据（所有选手）</h2>
                            </div>
                            <div class="filter-controls">
                                <div class="filter-group">
                                    <span>时间范围</span>
                                    <select id="streamRangeSelect" class="filter-select">
                                        <option value="7">近7日</option>
                                        <option value="30">近30日</option>
                                    </select>
                                </div>
                                <div class="filter-group">
                                    <span>指标</span>
                                    <select id="streamMetricSelect" class="filter-select">
                                        <option value="views">观看人数</option>
                                        <option value="danmu">弹幕数</option>
                                        <option value="gifts">礼物数</option>
                                    </select>
                                </div>
                            </div>
                        </div>
                        <div class="chart-container">
                            <div id="streamingBarChart" class="chart"></div>
                        </div>
                    </section>
                </div>

                <!-- 收入数据可视化区域 -->
                <section class="revenue-section">
                    <div class="section-header">
                        <div class="section-title-group">
                            <i class="section-icon fa fa-money"></i>
                            <h2 class="section-title">商业价值</h2>
                        </div>
                        <div class="filter-controls">
                            <div class="filter-group">
                                <span>正式选手</span>
                                <select class="filter-select">
                                    <option>收入来源占比</option>
                                </select>
                            </div>
                        </div>
                    </div>
                    <div class="revenue-charts-container">
                        <!-- 收入来源占比饼图 -->
                        <div class="revenue-chart-item" id="pieChartContainer">
                            <div class="revenue-pie-container">
                                <div class="revenue-total">2435W</div>
                                <div class="revenue-label">收入来源占比</div>
                                <div class="pie-chart-placeholder" id="pieChart"></div>
                                <div class="revenue-legends">
                                    <div class="legend-item" data-segment="business">
                                        <div class="legend-color legend-business"></div>
                                        <span>商业合作</span>
                                        <span class="legend-value">1460W (60%)</span>
                                    </div>
                                    <div class="legend-item" data-segment="ip">
                                        <div class="legend-color legend-ip"></div>
                                        <span>IP授权</span>
                                        <span class="legend-value">730W (30%)</span>
                                    </div>
                                    <div class="legend-item" data-segment="stream">
                                        <div class="legend-color legend-stream"></div>
                                        <span>直播收入</span>
                                        <span class="legend-value">245W (10%)</span>
                                    </div>
                                </div>
                            </div>
                        </div>
                        
                        <!-- 总收入趋势柱状图 -->
                        <div class="revenue-chart-item" id="barChartContainer">
                            <div class="revenue-bar-container">
                                <div class="chart-header">
                                    <span class="chart-title">总收入趋势</span>
                                    <select class="date-filter">
                                        <option>近七日数据</option>
                                    </select>
                                </div>
                                <div class="bar-chart-container">
                                    <div class="chart-legend">
                                        <div class="legend-item">
                                            <div class="legend-color legend-revenue"></div>
                                            <span>总收入</span>
                                        </div>
                                    </div>
                                    <div class="bar-chart-placeholder">
                                        <div class="y-axis">
                                            <span>¥10万</span>
                                            <span>¥9万</span>
                                            <span>¥8万</span>
                                            <span>¥7万</span>
                                            <span>¥6万</span>
                                            <span>¥5万</span>
                                            <span>¥4万</span>
                                            <span>¥3万</span>
                                            <span>¥2万</span>
                                            <span>¥1万</span>
                                            <span>¥0</span>
                                        </div>
                                        <div class="bars-container">
                                            <div class="bar-item" data-value="8.5万"><div class="bar" style="height: 85%;"></div><span>9月30日</span></div>
                                            <div class="bar-item" data-value="6.0万"><div class="bar" style="height: 60%;"></div><span>10月1日</span></div>
                                            <div class="bar-item" data-value="7.5万"><div class="bar" style="height: 75%;"></div><span>10月2日</span></div>
                                            <div class="bar-item" data-value="5.5万"><div class="bar" style="height: 55%;"></div><span>10月3日</span></div>
                                            <div class="bar-item" data-value="7.0万"><div class="bar" style="height: 70%;"></div><span>10月4日</span></div>
                                            <div class="bar-item" data-value="4.5万"><div class="bar" style="height: 45%;"></div><span>10月5日</span></div>
                                            <div class="bar-item" data-value="8.0万"><div class="bar" style="height: 80%;"></div><span>10月6日</span></div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        
                        <!-- 总收入分布趋势图表 -->
                        <div class="revenue-chart-item" id="comboChartContainer">
                            <div class="revenue-distribution-container">
                                <div class="chart-header">
                                    <span class="chart-title">总收入分布趋势</span>
                                    <select class="date-filter">
                                        <option>近七日数据</option>
                                    </select>
                                </div>
                                <div class="chart-content">
                                    <div class="chart-legend">
                                        <div class="legend-item">
                                            <span class="legend-color" style="background-color: #FF8C42;"></span>
                                            <span>商业合作数量</span>
                                        </div>
                                        <div class="legend-item">
                                            <span class="legend-color" style="background-color: #8B5CF6;"></span>
                                            <span>IP授权数量</span>
                                        </div>
                                        <div class="legend-item">
                                            <span class="legend-color" style="background-color: #06D6A0;"></span>
                                            <span>直播收入</span>
                                        </div>
                                    </div>
                                    <div class="combo-chart-wrapper">
                                        <div class="y-axis">
                                            <span>12</span>
                                            <span>10</span>
                                            <span>8</span>
                                            <span>6</span>
                                            <span>4</span>
                                            <span>2</span>
                                            <span>0</span>
                                        </div>
                                        <div class="combo-chart-content">
                                            <!-- 直播收入柱状图 -->
                                            <div class="stream-bars-container">
                                                <div class="stream-bar-item" data-value="9万"><div class="stream-bar" style="height: 75%;"></div></div>
                                                <div class="stream-bar-item" data-value="10万"><div class="stream-bar" style="height: 83%;"></div></div>
                                                <div class="stream-bar-item" data-value="5万"><div class="stream-bar" style="height: 42%;"></div></div>
                                                <div class="stream-bar-item" data-value="4万"><div class="stream-bar" style="height: 33%;"></div></div>
                                                <div class="stream-bar-item" data-value="0万"><div class="stream-bar" style="height: 0%;"></div></div>
                                                <div class="stream-bar-item" data-value="6万"><div class="stream-bar" style="height: 50%;"></div></div>
                                                <div class="stream-bar-item" data-value="4万"><div class="stream-bar" style="height: 33%;"></div></div>
                                            </div>
                                            <!-- X轴日期标签 -->
                                            <div class="x-axis-labels">
                                                <span>10/3</span>
                                                <span>10/4</span>
                                                <span>10/5</span>
                                                <span>10/6</span>
                                                <span>10/7</span>
                                                <span>10/8</span>
                                                <span>10/9</span>
                                            </div>
                                            <div class="line-chart-overlay">
                                                <svg width="100%" height="100%" viewBox="0 0 100 100" preserveAspectRatio="none">
                                                    <!-- 商业合作数量折线图 -->
                                                    <polyline points="8.33,75 25,65 41.67,80 58.33,78 75,60 91.67,72 100,68" 
                                                              fill="none" stroke="#FF8C42" stroke-width="2" opacity="0.9" class="line-business" vector-effect="non-scaling-stroke"/>
                                                    <!-- IP授权数量折线图 -->
                                                    <polyline points="8.33,80 25,70 41.67,85 58.33,75 75,65 91.67,70 100,72" 
                                                              fill="none" stroke="#8B5CF6" stroke-width="2" opacity="0.9" class="line-ip" vector-effect="non-scaling-stroke"/>
                                                </svg>
                                                <!-- 数据点容器 -->
                                                <div class="data-points-container">
                                                    <!-- 商业合作数量数据点 -->
                                                    <div class="data-point business-point" style="left: 8.33%; top: 75%;" title="商业合作数量: 3"></div>
                                                    <div class="data-point business-point" style="left: 25%; top: 65%;" title="商业合作数量: 4"></div>
                                                    <div class="data-point business-point" style="left: 41.67%; top: 80%;" title="商业合作数量: 2"></div>
                                                    <div class="data-point business-point" style="left: 58.33%; top: 78%;" title="商业合作数量: 2"></div>
                                                    <div class="data-point business-point" style="left: 75%; top: 60%;" title="商业合作数量: 5"></div>
                                                    <div class="data-point business-point" style="left: 91.67%; top: 72%;" title="商业合作数量: 3"></div>
                                                    <div class="data-point business-point" style="left: 100%; top: 68%;" title="商业合作数量: 4"></div>
                                                    
                                                    <!-- IP授权数量数据点 -->
                                                    <div class="data-point ip-point" style="left: 8.33%; top: 80%;" title="IP授权数量: 2"></div>
                                                    <div class="data-point ip-point" style="left: 25%; top: 70%;" title="IP授权数量: 3"></div>
                                                    <div class="data-point ip-point" style="left: 41.67%; top: 85%;" title="IP授权数量: 1"></div>
                                                    <div class="data-point ip-point" style="left: 58.33%; top: 75%;" title="IP授权数量: 3"></div>
                                                    <div class="data-point ip-point" style="left: 75%; top: 65%;" title="IP授权数量: 4"></div>
                                                    <div class="data-point ip-point" style="left: 91.67%; top: 70%;" title="IP授权数量: 3"></div>
                                                    <div class="data-point ip-point" style="left: 100%; top: 72%;" title="IP授权数量: 3"></div>
                                                </div>
                                            </div>
                                        </div>
                                        <div class="y-axis-right">
                                            <span>¥12万</span>
                                            <span>¥10万</span>
                                            <span>¥8万</span>
                                            <span>¥6万</span>
                                            <span>¥4万</span>
                                            <span>¥2万</span>
                                            <span>¥0</span>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </section>

            </div>

        </div>
    </main>

    <script>
        // 初始化图表
        function initCharts() {
            // 选手能力分布雷达图
            const abilityEl = document.getElementById('playerAbilityChart');
            let abilityChart = null;
            if (abilityEl) {
                abilityChart = echarts.init(abilityEl);
            }
            const abilityOption = {
                tooltip: {
                    backgroundColor: '#2E333B',
                    borderColor: '#4E5969',
                    textStyle: { color: '#FFFFFF' }
                },
                legend: {
                    data: ['诚C', '小鹿', '永远'],
                    textStyle: { color: '#FFFFFF' },
                    bottom: 20
                },
                radar: {
                    indicator: [
                        { name: '击杀能力', max: 100 },
                        { name: '生存能力', max: 100 },
                        { name: '团队配合', max: 100 },
                        { name: '战术执行', max: 100 },
                        { name: '心理素质', max: 100 },
                        { name: '商业价值', max: 100 }
                    ],
                    axisName: {
                        color: '#C9CDD4'
                    },
                    splitLine: {
                        lineStyle: { color: '#4E5969' }
                    },
                    splitArea: {
                        areaStyle: {
                            color: ['rgba(255, 107, 53, 0.1)', 'rgba(255, 107, 53, 0.05)']
                        }
                    }
                },
                series: [{
                    name: '选手能力',
                    type: 'radar',
                    data: [
                        {
                            value: [95, 88, 92, 90, 94, 96],
                            name: '诚C',
                            itemStyle: { color: '#FF6B35' }
                        },
                        {
                            value: [90, 92, 88, 85, 89, 88],
                            name: '小鹿',
                            itemStyle: { color: '#00D4AA' }
                        },
                        {
                            value: [85, 90, 94, 92, 87, 82],
                            name: '永远',
                            itemStyle: { color: '#FFD60A' }
                        }
                    ]
                }]
            };
            if (abilityChart) { abilityChart.setOption(abilityOption); }

            // 选手年龄分布柱状图
            const ageEl = document.getElementById('playerAgeChart');
            let ageChart = null;
            if (ageEl) { ageChart = echarts.init(ageEl); }
            const ageOption = {
                tooltip: {
                    trigger: 'axis',
                    backgroundColor: '#2E333B',
                    borderColor: '#4E5969',
                    textStyle: { color: '#FFFFFF' }
                },
                grid: {
                    left: '3%',
                    right: '4%',
                    bottom: '3%',
                    containLabel: true
                },
                xAxis: {
                    type: 'category',
                    data: ['18-20岁', '21-23岁', '24-26岁', '27-29岁', '30岁以上'],
                    axisLine: { lineStyle: { color: '#4E5969' } },
                    axisLabel: { color: '#C9CDD4' }
                },
                yAxis: {
                    type: 'value',
                    axisLabel: { color: '#C9CDD4' },
                    axisLabel: { color: '#C9CDD4' },
                    splitLine: { lineStyle: { color: '#4E5969' } }
                },
                series: [{
                    name: '选手数量',
                    type: 'bar',
                    data: [45, 68, 32, 8, 3],
                    itemStyle: {
                        color: {
                            type: 'linear',
                            x: 0, y: 0, x2: 0, y2: 1,
                            colorStops: [
                                { offset: 0, color: '#FF6B35' },
                                { offset: 1, color: '#FF9500' }
                            ]
                        }
                    }
                }]
            };
            if (ageChart) { ageChart.setOption(ageOption); }

            // 新增：趋势折线与直播柱状图
            const heatExposureChart = echarts.init(document.getElementById('heatExposureChart'));
            const streamingBarChart = echarts.init(document.getElementById('streamingBarChart'));

            function genDateLabels(days) {
                const labels = [];
                const now = new Date();
                for (let i = days - 1; i >= 0; i--) {
                    const d = new Date(now);
                    d.setDate(now.getDate() - i);
                    labels.push(`${d.getMonth() + 1}.${d.getDate()}`);
                }
                return labels;
            }
            function mockLine(days, base, swing) {
                const arr = [];
                let v = base;
                for (let i = 0; i < days; i++) {
                    v = v + Math.round(Math.random() * swing - swing / 2);
                    v = Math.max(3, v);
                    arr.push(v);
                }
                return arr;
            }
            function mockBar(days, base, swing) {
                const arr = [];
                for (let i = 0; i < days; i++) {
                    let v = base + Math.round(Math.random() * swing - swing / 2);
                    v = Math.max(0, v);
                    arr.push(v);
                }
                return arr;
            }

            let currentPlatform = null;
            function updateHeatChart({ days, platform }) {
                const xCats = genDateLabels(days);
                let heat = mockLine(days, 26, 6);
                let exposure = mockLine(days, 22, 8);
                let content = mockLine(days, 12, 5);
                if (platform) {
                    const factor = platform === 'douyin' ? 1.12 : (platform === 'kuaishou' ? 1.0 : 0.92);
                    heat = heat.map(x => Math.round(x * factor));
                    exposure = exposure.map(x => Math.round(x * factor * 1.05));
                    content = content.map(x => Math.round(x * factor * 0.95));
                }
                const option = {
                    backgroundColor: 'transparent',
                    tooltip: { trigger: 'axis', axisPointer: { type: 'line' } },
                    legend: { data: ['粉丝总数（万）', '曝光量(万)', '内容数(条)'], textStyle: { color: '#FFFFFF' } },
                    grid: { left: 40, right: 30, top: 24, bottom: 28 },
                    xAxis: { type: 'category', data: xCats, boundaryGap: false, axisLine: { lineStyle: { color: '#4E5969' } }, axisTick: { show: false }, axisLabel: { color: '#C9CDD4' } },
                    yAxis: [
                        { type: 'value', axisLine: { lineStyle: { color: '#4E5969' } }, axisTick: { show: false }, axisLabel: { color: '#C9CDD4' }, splitLine: { lineStyle: { color: '#3A3F47', type: 'dashed' } } },
                        { type: 'value', axisLine: { lineStyle: { color: '#4E5969' } }, axisTick: { show: false }, axisLabel: { color: '#C9CDD4' }, splitLine: { show: false } }
                    ],
                    series: [
                        { name: '粉丝总数（万）', type: 'line', smooth: true, symbol: 'circle', symbolSize: 4, itemStyle: { color: '#4DD4F7' }, lineStyle: { width: 2 }, emphasis: { focus: 'series' }, data: heat },
                        { name: '曝光量(万)', type: 'line', smooth: true, yAxisIndex: 1, symbol: 'circle', symbolSize: 4, itemStyle: { color: '#165DFF' }, lineStyle: { width: 2 }, emphasis: { focus: 'series' }, data: exposure },
                        { name: '内容数(条)', type: 'line', smooth: true, symbol: 'circle', symbolSize: 4, itemStyle: { color: '#FF6B35' }, lineStyle: { width: 2 }, emphasis: { focus: 'series' }, data: content }
                    ]
                };
                heatExposureChart.setOption(option);
            }

            function updateStreamingChart({ days, focus }) {
                const xCats = genDateLabels(days);
                const views = mockBar(days, 9, 4);
                const danmu = mockBar(days, 3, 2);
                const gifts = mockBar(days, 2, 1);
                const toOpacity = (k) => (focus === k ? 1 : 0.55);
                const option = {
                    backgroundColor: 'transparent',
                    tooltip: { trigger: 'axis', axisPointer: { type: 'shadow' } },
                    legend: { data: ['观看人数', '弹幕数', '礼物数'], textStyle: { color: '#FFFFFF' } },
                    grid: { left: 40, right: 30, top: 24, bottom: 30 },
                    xAxis: { type: 'category', data: xCats, axisLine: { lineStyle: { color: '#4E5969' } }, axisTick: { show: false }, axisLabel: { color: '#C9CDD4' } },
                    yAxis: { type: 'value', axisLine: { lineStyle: { color: '#4E5969' } }, axisTick: { show: false }, axisLabel: { color: '#C9CDD4' }, splitLine: { lineStyle: { color: '#3A3F47', type: 'dashed' } } },
                    series: [
                        { name: '观看人数', type: 'bar', data: views, barWidth: 18, barCategoryGap: '35%', barGap: '15%', itemStyle: { color: '#1E9DFB', opacity: toOpacity('views') } },
                        { name: '弹幕数', type: 'bar', data: danmu, barWidth: 18, barCategoryGap: '35%', barGap: '15%', itemStyle: { color: '#0FC6C2', opacity: toOpacity('danmu') } },
                        { name: '礼物数', type: 'bar', data: gifts, barWidth: 18, barCategoryGap: '35%', barGap: '15%', itemStyle: { color: '#F53F3F', opacity: toOpacity('gifts') } }
                    ]
                };
                streamingBarChart.setOption(option);
            }

            // 初始渲染
            updateHeatChart({ days: parseInt(document.getElementById('heatRangeSelect').value), platform: currentPlatform });
            updateStreamingChart({ days: parseInt(document.getElementById('streamRangeSelect').value), focus: document.getElementById('streamMetricSelect').value });

            // 交互 - 趋势区
            document.getElementById('heatRangeSelect').addEventListener('change', function() {
                updateHeatChart({ days: parseInt(this.value), platform: currentPlatform });
            });
            const toggleAllBtn = document.getElementById('toggleAllPlatforms');
            const toggleSingleBtn = document.getElementById('toggleSinglePlatform');
            const platformSelect = document.getElementById('platformSelect');
            toggleSingleBtn.addEventListener('click', function() {
                toggleAllBtn.classList.remove('active');
                toggleSingleBtn.classList.add('active');
                platformSelect.style.display = 'inline-block';
                currentPlatform = platformSelect.value;
                updateHeatChart({ days: parseInt(document.getElementById('heatRangeSelect').value), platform: currentPlatform });
            });
            toggleAllBtn.addEventListener('click', function() {
                toggleSingleBtn.classList.remove('active');
                toggleAllBtn.classList.add('active');
                platformSelect.style.display = 'none';
                currentPlatform = null;
                updateHeatChart({ days: parseInt(document.getElementById('heatRangeSelect').value), platform: currentPlatform });
            });
            platformSelect.addEventListener('change', function() {
                currentPlatform = platformSelect.value;
                updateHeatChart({ days: parseInt(document.getElementById('heatRangeSelect').value), platform: currentPlatform });
            });

            // 交互 - 直播区
            document.getElementById('streamRangeSelect').addEventListener('change', function() {
                updateStreamingChart({ days: parseInt(this.value), focus: document.getElementById('streamMetricSelect').value });
            });
            document.getElementById('streamMetricSelect').addEventListener('change', function() {
                updateStreamingChart({ days: parseInt(document.getElementById('streamRangeSelect').value), focus: this.value });
            });

            // 响应式处理
            window.addEventListener('resize', function() {
                if (abilityChart) abilityChart.resize();
                if (ageChart) ageChart.resize();
                heatExposureChart.resize();
                streamingBarChart.resize();
            });

            // 收入数据可视化区域交互效果
            initRevenueInteractions();
        }

        // 收入数据可视化区域交互效果初始化
        function initRevenueInteractions() {
            // 饼图交互效果
            const pieChartContainer = document.getElementById('pieChartContainer');
            const pieChart = document.getElementById('pieChart');
            const legendItems = pieChartContainer.querySelectorAll('.legend-item');
            
            // 创建悬停提示框
            const tooltip = document.createElement('div');
            tooltip.className = 'chart-tooltip';
            tooltip.style.cssText = `
                position: absolute;
                background: rgba(0, 0, 0, 0.8);
                color: white;
                padding: 8px 12px;
                border-radius: 4px;
                font-size: 12px;
                pointer-events: none;
                z-index: 1000;
                display: none;
                white-space: nowrap;
            `;
            document.body.appendChild(tooltip);

            // 饼图悬停效果
            pieChart.addEventListener('mousemove', function(e) {
                const rect = pieChart.getBoundingClientRect();
                const centerX = rect.left + rect.width / 2;
                const centerY = rect.top + rect.height / 2;
                const angle = Math.atan2(e.clientY - centerY, e.clientX - centerX) * 180 / Math.PI;
                
                let segment = '';
                let value = '';
                if (angle >= -60 && angle < 60) {
                    segment = '商业合作';
                    value = '1200W';
                } else if (angle >= 60 && angle < 180) {
                    segment = 'IP授权';
                    value = '735W';
                } else {
                    segment = '直播收入';
                    value = '500W';
                }
                
                tooltip.innerHTML = `${segment}: ${value}`;
                tooltip.style.left = e.pageX + 10 + 'px';
                tooltip.style.top = e.pageY - 10 + 'px';
                tooltip.style.display = 'block';
            });

            pieChart.addEventListener('mouseleave', function() {
                tooltip.style.display = 'none';
            });

            // 图例点击切换效果
            legendItems.forEach(item => {
                item.addEventListener('click', function() {
                    const segment = this.getAttribute('data-segment');
                    const isActive = this.classList.contains('legend-active');
                    
                    if (isActive) {
                        this.classList.remove('legend-active');
                        this.style.opacity = '0.5';
                    } else {
                        this.classList.add('legend-active');
                        this.style.opacity = '1';
                    }
                });
            });

            // 柱状图交互效果
            const barChartContainer = document.getElementById('barChartContainer');
            const barItems = barChartContainer.querySelectorAll('.bar-item');
            
            barItems.forEach(item => {
                const bar = item.querySelector('.bar');
                const value = item.getAttribute('data-value');
                const date = item.querySelector('span').textContent;
                
                item.addEventListener('mouseenter', function() {
                    bar.style.transform = 'scaleY(1.05)';
                    bar.style.transition = 'transform 0.2s ease';
                    
                    tooltip.innerHTML = `${date}: ${value}`;
                    const rect = item.getBoundingClientRect();
                    tooltip.style.left = rect.left + rect.width / 2 - tooltip.offsetWidth / 2 + 'px';
                    tooltip.style.top = rect.top - 30 + 'px';
                    tooltip.style.display = 'block';
                });
                
                item.addEventListener('mouseleave', function() {
                    bar.style.transform = 'scaleY(1)';
                    tooltip.style.display = 'none';
                });
            });

            // 组合图表交互效果
            const comboChartContainer = document.getElementById('comboChartContainer');
            const comboLegendItems = comboChartContainer.querySelectorAll('.legend-item');
            
            comboLegendItems.forEach(item => {
                item.addEventListener('click', function() {
                    const type = this.getAttribute('data-type');
                    const isActive = this.classList.contains('legend-active');
                    
                    if (isActive) {
                        this.classList.remove('legend-active');
                        this.style.opacity = '0.5';
                    } else {
                        this.classList.add('legend-active');
                        this.style.opacity = '1';
                    }
                    
                    // 这里可以添加实际的图表数据切换逻辑
                    console.log(`切换 ${type} 数据显示状态`);
                });
                
                // 添加悬停效果
                item.addEventListener('mouseenter', function() {
                    this.style.backgroundColor = 'rgba(255, 255, 255, 0.1)';
                    this.style.borderRadius = '4px';
                    this.style.transition = 'background-color 0.2s ease';
                });
                
                item.addEventListener('mouseleave', function() {
                    this.style.backgroundColor = 'transparent';
                });
            });
        }

        // 页面加载完成后的初始化
        document.addEventListener('DOMContentLoaded', function() {
            initCharts();
        });
    </script>

<script src="js/common.js"></script>
</body>
</html>

